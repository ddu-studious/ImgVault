# ç”¨æˆ·ç«¯/ç®¡ç†ç«¯åˆ†ç¦»ä¸ä¸»é¢˜æ”¯æŒ éœ€æ±‚æ–‡æ¡£

**ç‰ˆæœ¬**: v2.3.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-15
**çŠ¶æ€**: è§„åˆ’ä¸­

## éœ€æ±‚èƒŒæ™¯

### ç°çŠ¶é—®é¢˜

ImgVault v2.1.0~v2.2.0 çš„å‰ç«¯é¡µé¢ï¼ˆ`/imgvault/`ï¼‰å°†**ç”¨æˆ·åŠŸèƒ½**å’Œ**ç®¡ç†åŠŸèƒ½**æ··åˆåœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ï¼š

| åŠŸèƒ½ | æœ¬åº”å½’å± | å½“å‰çŠ¶æ€ |
|------|---------|---------|
| ä¸Šä¼ å›¾ç‰‡ | æ‰€æœ‰ç”¨æˆ· | æ··åˆåœ¨åŒä¸€é¡µé¢ |
| æŸ¥çœ‹/æœç´¢å›¾ç‰‡ | æ‰€æœ‰ç”¨æˆ· | èƒ½çœ‹åˆ°æ‰€æœ‰äººçš„å›¾ç‰‡ |
| å›æ”¶ç«™ | ç®¡ç†å‘˜ | æ‰€æœ‰äººå¯è§ |
| æ‰¹é‡åˆ é™¤ | ç®¡ç†å‘˜ | æ‰€æœ‰äººå¯æ“ä½œ |
| æ ‡ç­¾åˆ›å»º/åˆ é™¤ | ç®¡ç†å‘˜ | æ‰€æœ‰äººå¯æ“ä½œ |
| ç›¸å†Œåˆ›å»º/åˆ é™¤ | ç®¡ç†å‘˜ | æ‰€æœ‰äººå¯æ“ä½œ |
| æ“ä½œæ—¥å¿—/ç»Ÿè®¡ | ç®¡ç†å‘˜ | API å¯åŒ¿åè°ƒç”¨ |

åŒæ—¶å­˜åœ¨ä»¥ä¸‹æŠ€æœ¯é—®é¢˜ï¼š

1. **æ— è®¤è¯æœºåˆ¶** - æ‰€æœ‰ APIï¼ˆåŒ…æ‹¬ Admin æ¥å£ï¼‰å®Œå…¨åŒ¿åè®¿é—®
2. **æ— ä¸»é¢˜æ”¯æŒ** - ä»…æ”¯æŒæµ…è‰²æ¨¡å¼ï¼Œä¸é€‚é…æ·±è‰²åå¥½ç”¨æˆ·
3. **èŒè´£æ··ä¹±** - ä¸€ä¸ªé¡µé¢æ‰¿è½½äº†ç”¨æˆ·ç«¯å’Œç®¡ç†ç«¯ä¸¤ç§èŒè´£

### ä¸ v2.2.0 çš„å…³ç³»

v2.2.0 è§„åˆ’äº† Admin ç®¡ç†åå°ï¼ˆ`frontend/admin/`ï¼‰ï¼Œä½†æœªæ¶‰åŠï¼š
- ç”¨æˆ·ç«¯åŠŸèƒ½ç²¾ç®€ï¼ˆç§»é™¤ç®¡ç†åŠŸèƒ½ï¼‰
- è®¤è¯é‰´æƒæœºåˆ¶
- æ·±è‰²/æµ…è‰²/è·Ÿéšç³»ç»Ÿ ä¸»é¢˜æ”¯æŒ

æœ¬ç‰ˆæœ¬åœ¨ v2.2.0 åŸºç¡€ä¸Š**æ¼”è¿›**ï¼Œå®Œæˆå®Œæ•´çš„ç”¨æˆ·/ç®¡ç†ç«¯åˆ†ç¦»ã€‚

## éœ€æ±‚ç›®æ ‡

1. **å‰ç«¯åˆ†ç¦»** - ç”¨æˆ·å‰ç«¯ï¼ˆ`/imgvault/`ï¼‰å’Œç®¡ç†å‰ç«¯ï¼ˆ`/imgvault/admin/`ï¼‰å®Œå…¨ç‹¬ç«‹
2. **æƒé™éš”ç¦»** - ç®¡ç†æ¥å£éœ€è¦ç™»å½•è®¤è¯ï¼Œç”¨æˆ·æ¥å£ä¿æŒå¼€æ”¾
3. **ä¸»é¢˜æ”¯æŒ** - ä¸¤å¥—å‰ç«¯å‡æ”¯æŒæ·±è‰²/æµ…è‰²/è·Ÿéšç³»ç»Ÿä¸‰ç§ä¸»é¢˜æ¨¡å¼
4. **Nginx è·¯ç”±** - æ–°å¢ç®¡ç†åå°çš„ Nginx è·¯ç”±é…ç½®

## åŠŸèƒ½éœ€æ±‚

### P0 - æ ¸å¿ƒåŠŸèƒ½

| ID | åŠŸèƒ½ | è¯´æ˜ |
|----|------|------|
| F01 | ç”¨æˆ·å‰ç«¯ç²¾ç®€ | ç§»é™¤å›æ”¶ç«™ã€æ‰¹é‡åˆ é™¤ã€æ ‡ç­¾åˆ›å»º/åˆ é™¤ã€ç›¸å†Œåˆ›å»º/åˆ é™¤ç­‰ç®¡ç†åŠŸèƒ½ |
| F02 | ç®¡ç†å‰ç«¯æ–°å»º | åœ¨ `frontend/admin/` å»ºè®¾ç‹¬ç«‹ç®¡ç†åå°ï¼ŒåŒ…å«å®Œæ•´ç®¡ç†èƒ½åŠ› |
| F03 | ç®¡ç†å‘˜è®¤è¯ | Admin API åŠ  Token é‰´æƒï¼Œéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ç®¡ç†æ¥å£ |
| F04 | ç®¡ç†å‘˜ç™»å½•é¡µ | ç®¡ç†åå°æä¾›ç™»å½•é¡µé¢ï¼ŒéªŒè¯å¯†ç åè·å– Token |
| F05 | Nginx è·¯ç”±é…ç½® | æ–°å¢ `/imgvault/admin/` è·¯ç”±ï¼ŒæŒ‡å‘ç®¡ç†å‰ç«¯é™æ€æ–‡ä»¶ |

### P1 - é‡è¦åŠŸèƒ½

| ID | åŠŸèƒ½ | è¯´æ˜ |
|----|------|------|
| F06 | æ·±è‰²/æµ…è‰²/è·Ÿéšç³»ç»Ÿ | ä¸¤å¥—å‰ç«¯å‡æ”¯æŒä¸»é¢˜åˆ‡æ¢ï¼Œç”¨ CSS å˜é‡ + `prefers-color-scheme` |
| F07 | Dashboard çœ‹æ¿ | ç®¡ç†åå°é¦–é¡µå±•ç¤ºç»Ÿè®¡æ•°æ®ï¼ˆå›¾ç‰‡æ•°ã€å­˜å‚¨ç©ºé—´ã€æ ¼å¼åˆ†å¸ƒç­‰ï¼‰ |
| F08 | å®Œæ•´å›¾ç‰‡ç®¡ç† | ç®¡ç†åå°æ”¯æŒå…¨çŠ¶æ€å›¾ç‰‡æµè§ˆã€æœç´¢ã€ç­›é€‰ã€æ‰¹é‡æ“ä½œ |
| F09 | å›æ”¶ç«™ç®¡ç† | ç®¡ç†åå°æ”¯æŒæŸ¥çœ‹å·²åˆ é™¤å›¾ç‰‡ã€æ¢å¤ã€æ°¸ä¹…åˆ é™¤ |

### P2 - é”¦ä¸Šæ·»èŠ±

| ID | åŠŸèƒ½ | è¯´æ˜ |
|----|------|------|
| F10 | æ ‡ç­¾ç®¡ç†é¡µ | ç®¡ç†åå°ç‹¬ç«‹çš„æ ‡ç­¾ CRUD ç®¡ç†é¡µé¢ |
| F11 | ç›¸å†Œç®¡ç†é¡µ | ç®¡ç†åå°ç‹¬ç«‹çš„ç›¸å†Œ CRUD ç®¡ç†é¡µé¢ |
| F12 | æ“ä½œæ—¥å¿—æŸ¥çœ‹ | ç®¡ç†åå°æŸ¥çœ‹æ“ä½œæ—¥å¿—ï¼Œæ”¯æŒæŒ‰ç›®æ ‡ç­›é€‰ |
| F13 | ç³»ç»Ÿç›‘æ§ | ç®¡ç†åå°æŸ¥çœ‹å¥åº·æ£€æŸ¥ã€ç¼“å­˜ç»Ÿè®¡ã€æœåŠ¡ä¿¡æ¯ |

## æŠ€æœ¯æ–¹æ¡ˆ

### ä¸€ã€å‰ç«¯æ¶æ„

#### ç›®å½•ç»“æ„

```
frontend/
â”œâ”€â”€ index.html          # ç”¨æˆ·å‰ç«¯ä¸»é¡µé¢
â”œâ”€â”€ app.js              # ç”¨æˆ·å‰ç«¯é€»è¾‘ï¼ˆç²¾ç®€ç‰ˆï¼‰
â”œâ”€â”€ style.css           # ç”¨æˆ·å‰ç«¯æ ·å¼ï¼ˆå«ä¸»é¢˜å˜é‡ï¼‰
â””â”€â”€ admin/              # ç®¡ç†åå°ï¼ˆç‹¬ç«‹ï¼‰
    â”œâ”€â”€ index.html      # ç®¡ç†åå°ä¸»é¡µé¢ï¼ˆå«ç™»å½•ï¼‰
    â”œâ”€â”€ admin.js        # ç®¡ç†åå°é€»è¾‘
    â””â”€â”€ admin.css       # ç®¡ç†åå°æ ·å¼ï¼ˆå«ä¸»é¢˜å˜é‡ï¼‰
```

#### ç”¨æˆ·å‰ç«¯ï¼ˆ/imgvault/ï¼‰åŠŸèƒ½èŒƒå›´

| ä¿ç•™ | ç§»é™¤ |
|------|------|
| ä¸Šä¼ å›¾ç‰‡ï¼ˆæ‹–æ‹½/ç‚¹å‡»ï¼‰ | å›æ”¶ç«™å…¥å£ |
| å›¾ç‰‡åˆ—è¡¨æµè§ˆ | æ‰¹é‡åˆ é™¤æŒ‰é’® |
| å›¾ç‰‡æœç´¢ | æ ‡ç­¾åˆ›å»º/åˆ é™¤ï¼ˆä¿ç•™åªè¯»æµè§ˆï¼‰ |
| æŒ‰æ ‡ç­¾æµè§ˆï¼ˆåªè¯»ï¼‰ | ç›¸å†Œåˆ›å»º/åˆ é™¤ï¼ˆä¿ç•™åªè¯»æµè§ˆï¼‰ |
| æŒ‰ç›¸å†Œæµè§ˆï¼ˆåªè¯»ï¼‰ | å›¾ç‰‡è¯¦æƒ…ä¸­çš„åˆ é™¤æŒ‰é’® |
| å›¾ç‰‡è¯¦æƒ…æŸ¥çœ‹/ä¸‹è½½ | - |
| ä¸»é¢˜åˆ‡æ¢ | - |

#### ç®¡ç†å‰ç«¯ï¼ˆ/imgvault/admin/ï¼‰åŠŸèƒ½èŒƒå›´

- ç™»å½•é¡µé¢ï¼ˆå¯†ç è®¤è¯ï¼‰
- Dashboard æ•°æ®çœ‹æ¿
- å›¾ç‰‡ç®¡ç†ï¼ˆå…¨çŠ¶æ€æµè§ˆã€æœç´¢ã€ç­›é€‰ã€æ‰¹é‡åˆ é™¤ã€æ‰¹é‡æ‰“æ ‡ç­¾ï¼‰
- å›æ”¶ç«™ï¼ˆæŸ¥çœ‹ã€æ¢å¤ã€æ°¸ä¹…åˆ é™¤ï¼‰
- æ ‡ç­¾ç®¡ç†ï¼ˆCRUDã€å…³è”ç»Ÿè®¡ï¼‰
- ç›¸å†Œç®¡ç†ï¼ˆCRUDã€å°é¢è®¾ç½®ã€å›¾ç‰‡ç®¡ç†ï¼‰
- æ“ä½œæ—¥å¿—æŸ¥çœ‹
- ç³»ç»Ÿç›‘æ§ï¼ˆå¥åº·æ£€æŸ¥ã€ç¼“å­˜ã€æœåŠ¡ä¿¡æ¯ï¼‰
- ä¸»é¢˜åˆ‡æ¢

### äºŒã€ä¸»é¢˜ç³»ç»Ÿå®ç°

#### CSS å˜é‡æ–¹æ¡ˆ

```css
/* æµ…è‰²ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
:root {
    --bg-primary: #ffffff;
    --bg-secondary: #f5f5f7;
    --bg-sidebar: #ffffff;
    --text-primary: #1d1d1f;
    --text-secondary: #86868b;
    --border-color: #e5e5e5;
    --card-bg: #ffffff;
    --card-shadow: 0 1px 3px rgba(0,0,0,0.1);
    --accent-color: #0071e3;
    /* ... æ›´å¤šå˜é‡ */
}

/* æ·±è‰²ä¸»é¢˜ */
[data-theme="dark"] {
    --bg-primary: #1d1d1f;
    --bg-secondary: #2d2d2f;
    --bg-sidebar: #161617;
    --text-primary: #f5f5f7;
    --text-secondary: #86868b;
    --border-color: #3a3a3c;
    --card-bg: #2d2d2f;
    --card-shadow: 0 1px 3px rgba(0,0,0,0.3);
    --accent-color: #2997ff;
    /* ... æ›´å¤šå˜é‡ */
}
```

#### JS ä¸»é¢˜åˆ‡æ¢é€»è¾‘

```javascript
// ä¸»é¢˜æ¨¡å¼ï¼šlight / dark / system
function setTheme(mode) {
    localStorage.setItem('imgvault-theme', mode);
    applyTheme(mode);
}

function applyTheme(mode) {
    if (mode === 'system') {
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
    } else {
        document.documentElement.setAttribute('data-theme', mode);
    }
}

// ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    if (localStorage.getItem('imgvault-theme') === 'system') {
        applyTheme('system');
    }
});

// åˆå§‹åŒ–
applyTheme(localStorage.getItem('imgvault-theme') || 'system');
```

#### ä¸»é¢˜åˆ‡æ¢ UI

åœ¨é¡µé¢ Header å³ä¾§æ”¾ç½®ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼Œä¸‰ç§çŠ¶æ€å¾ªç¯åˆ‡æ¢ï¼š

```
â˜€ï¸ æµ…è‰²  â†’  ğŸŒ™ æ·±è‰²  â†’  ğŸ’» è·Ÿéšç³»ç»Ÿ  â†’  â˜€ï¸ æµ…è‰² ...
```

### ä¸‰ã€åç«¯è®¤è¯æ–¹æ¡ˆ

#### è®¾è®¡åŸåˆ™

- **è½»é‡çº§** - ä¸å¼•å…¥ Spring Securityï¼Œä½¿ç”¨ HandlerInterceptor + JWT
- **ä»…é™ Admin** - åªæœ‰ `/api/v1/admin/**` è·¯å¾„éœ€è¦è®¤è¯
- **å•ç®¡ç†å‘˜** - å¯†ç é…ç½®åœ¨ `application.yml` ä¸­ï¼Œæ— éœ€ç”¨æˆ·è¡¨
- **æ— çŠ¶æ€** - JWT Tokenï¼Œä¸ä¾èµ– Session/Redis

#### é…ç½®é¡¹

```yaml
# application.yml æ–°å¢
admin:
  password: ${ADMIN_PASSWORD:imgvault-admin}  # ç®¡ç†å‘˜å¯†ç ï¼Œç”Ÿäº§ç¯å¢ƒé€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥
  jwt:
    secret: ${JWT_SECRET:imgvault-jwt-secret-key-2026}  # JWT ç­¾åå¯†é’¥
    expire-hours: 24  # Token æœ‰æ•ˆæœŸï¼ˆå°æ—¶ï¼‰
```

#### æ–°å¢æ¥å£

```
POST /api/v1/admin/login
Content-Type: application/json

è¯·æ±‚:
{
  "password": "ç®¡ç†å‘˜å¯†ç "
}

å“åº”ï¼ˆæˆåŠŸï¼‰:
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOi...",
    "expiresIn": 86400
  }
}

å“åº”ï¼ˆå¤±è´¥ï¼‰:
{
  "code": 401,
  "message": "å¯†ç é”™è¯¯"
}
```

#### è®¤è¯æ‹¦æˆªå™¨

```java
/**
 * Admin API è®¤è¯æ‹¦æˆªå™¨
 * æ‹¦æˆª /api/v1/admin/** è·¯å¾„ï¼ˆæ’é™¤ /api/v1/admin/loginï¼‰
 */
public class AdminAuthInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {
        // 1. æ’é™¤ç™»å½•æ¥å£
        if (request.getRequestURI().endsWith("/admin/login")) return true;
        // 2. ä» Authorization header æå– Bearer Token
        // 3. éªŒè¯ JWT Token
        // 4. éªŒè¯å¤±è´¥è¿”å› 401
    }
}
```

#### æ³¨å†Œæ‹¦æˆªå™¨

```java
@Configuration
public class WebMvcConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(adminAuthInterceptor())
                .addPathPatterns("/api/v1/admin/**")
                .excludePathPatterns("/api/v1/admin/login");
    }
}
```

### å››ã€Nginx è·¯ç”±é…ç½®

åœ¨ç°æœ‰ `/imgvault/api/` å’Œ `/imgvault/` ä¹‹é—´æ–°å¢ admin è·¯ç”±ï¼š

```nginx
# ImgVault - ç®¡ç†åå°é™æ€æ–‡ä»¶ï¼ˆå¿…é¡»åœ¨ /imgvault/ ä¹‹å‰ï¼‰
location /imgvault/admin/ {
    alias /work-space/ImgVault/frontend/admin/;
    index index.html;
    try_files $uri $uri/ /imgvault/admin/index.html;
}

# ImgVault - å‰ç«¯é™æ€æ–‡ä»¶ï¼ˆå·²æœ‰ï¼Œä¸å˜ï¼‰
location /imgvault/ {
    alias /work-space/ImgVault/frontend/;
    index index.html;
    try_files $uri $uri/ /imgvault/index.html;
}
```

**è·¯ç”±å…³ç³»æ€»è§ˆ**ï¼š

| è¯·æ±‚è·¯å¾„ | Nginx å¤„ç† | ç›®æ ‡ |
|---------|-----------|------|
| `/imgvault/api/v1/*` | proxy_pass | `http://127.0.0.1:8080/api/v1/*` (åç«¯ API) |
| `/imgvault/admin/*` | alias | `frontend/admin/` (ç®¡ç†åå°é™æ€æ–‡ä»¶) |
| `/imgvault/storage/*` | proxy_pass | MinIO å›¾ç‰‡ä»£ç† |
| `/imgvault/imgproxy/*` | proxy_pass | imgproxy å›¾ç‰‡å¤„ç†ä»£ç† |
| `/imgvault/*` | alias | `frontend/` (ç”¨æˆ·å‰ç«¯é™æ€æ–‡ä»¶) |

### äº”ã€ç«¯å£è§„åˆ’

| æœåŠ¡ | ç«¯å£ | å˜æ›´ |
|------|------|------|
| imgvault-api | 8080 | **ä¸å˜** |
| imgvault-admin | 8082 | æš‚ä¸ä½¿ç”¨ |
| MinIO | 9000/9001 | ä¸å˜ |
| imgproxy | 8081 | ä¸å˜ |

## é¡µé¢è®¾è®¡

### ç”¨æˆ·å‰ç«¯å¸ƒå±€ï¼ˆ/imgvault/ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: V ImgVault    [æœç´¢]    [â˜€ï¸/ğŸŒ™] [ä¸Šä¼ ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ä¾§è¾¹æ   â”‚ å†…å®¹åŒº                               â”‚
â”‚        â”‚                                     â”‚
â”‚ å…¨éƒ¨å›¾ç‰‡ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚        â”‚ â”‚     æ‹–æ”¾å›¾ç‰‡åˆ°æ­¤å¤„ä¸Šä¼               â”‚ â”‚
â”‚ æ ‡ç­¾    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  é£æ™¯   â”‚                                     â”‚
â”‚  äººç‰©   â”‚ å…¨éƒ¨å›¾ç‰‡ Â· 24 å¼                      â”‚
â”‚        â”‚                                     â”‚
â”‚ ç›¸å†Œ    â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”        â”‚
â”‚  æ—…è¡Œ   â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚        â”‚
â”‚        â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                                     â”‚
â”‚        â”‚ [åˆ†é¡µå™¨]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ç°æœ‰é¡µé¢çš„åŒºåˆ«**ï¼š
- ç§»é™¤"å›æ”¶ç«™"å¯¼èˆª
- ç§»é™¤é¡¶éƒ¨"æ‰¹é‡åˆ é™¤"æŒ‰é’®
- æ ‡ç­¾/ç›¸å†ŒåŒºåŸŸç§»é™¤"+"åˆ›å»ºæŒ‰é’®
- å›¾ç‰‡è¯¦æƒ…å¼¹çª—ç§»é™¤"åˆ é™¤"æŒ‰é’®
- æ–°å¢ä¸»é¢˜åˆ‡æ¢æŒ‰é’®

### ç®¡ç†å‰ç«¯å¸ƒå±€ï¼ˆ/imgvault/admin/ï¼‰

#### ç™»å½•é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚       ğŸ” ImgVault Admin         â”‚
â”‚                                  â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚       â”‚ è¾“å…¥ç®¡ç†å‘˜å¯†ç      â”‚      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚       [        ç™»å½•        ]     â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç®¡ç†ä¸»é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: ImgVault Admin   [â˜€ï¸/ğŸŒ™]   [é€€å‡º]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ä¾§è¾¹æ   â”‚ Dashboard                            â”‚
â”‚        â”‚                                     â”‚
â”‚ ğŸ“Š çœ‹æ¿ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ ğŸ–¼ å›¾ç‰‡ â”‚ â”‚æ€»é‡   â”‚ â”‚å­˜å‚¨   â”‚ â”‚ä»Šæ—¥  â”‚          â”‚
â”‚ ğŸ—‘ å›æ”¶ç«™â”‚ â”‚1234  â”‚ â”‚5.0GB â”‚ â”‚ 15  â”‚          â”‚
â”‚ ğŸ· æ ‡ç­¾ â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚ ğŸ“ ç›¸å†Œ â”‚                                     â”‚
â”‚ ğŸ“‹ æ—¥å¿— â”‚ [æ ¼å¼åˆ†å¸ƒå›¾]  [è¿‘æœŸä¸Šä¼ ]              â”‚
â”‚ ğŸ”§ ç³»ç»Ÿ â”‚                                     â”‚
â”‚        â”‚ [æ“ä½œæ—¥å¿—]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç”¨æˆ·å‰ç«¯ vs ç®¡ç†å‰ç«¯ API è°ƒç”¨å¯¹æ¯”

| API | ç”¨æˆ·å‰ç«¯ | ç®¡ç†å‰ç«¯ | éœ€è¦è®¤è¯ |
|-----|---------|---------|---------|
| `GET /images` | æµè§ˆå›¾ç‰‡ | ç®¡ç†å›¾ç‰‡ | å¦ |
| `POST /images/upload` | ä¸Šä¼  | - | å¦ |
| `GET /images/{id}` | æŸ¥çœ‹è¯¦æƒ… | æŸ¥çœ‹è¯¦æƒ… | å¦ |
| `DELETE /images/{id}` | - | åˆ é™¤å›¾ç‰‡ | å¦ (ä½†ç”¨æˆ·å‰ç«¯ä¸è°ƒç”¨) |
| `GET /tags` | æµè§ˆæ ‡ç­¾ | ç®¡ç†æ ‡ç­¾ | å¦ |
| `POST /tags` | - | åˆ›å»ºæ ‡ç­¾ | å¦ (ä½†ç”¨æˆ·å‰ç«¯ä¸è°ƒç”¨) |
| `GET /albums` | æµè§ˆç›¸å†Œ | ç®¡ç†ç›¸å†Œ | å¦ |
| `POST /albums` | - | åˆ›å»ºç›¸å†Œ | å¦ (ä½†ç”¨æˆ·å‰ç«¯ä¸è°ƒç”¨) |
| `POST /admin/login` | - | ç™»å½• | å¦ (ç™»å½•æ¥å£æœ¬èº«ä¸éœ€è¦) |
| `GET /admin/stats` | - | ç»Ÿè®¡çœ‹æ¿ | **æ˜¯** |
| `GET /admin/trash` | - | å›æ”¶ç«™ | **æ˜¯** |
| `POST /admin/trash/{id}/restore` | - | æ¢å¤å›¾ç‰‡ | **æ˜¯** |
| `POST /admin/batch-delete` | - | æ‰¹é‡åˆ é™¤ | **æ˜¯** |
| `POST /admin/batch-tag` | - | æ‰¹é‡æ‰“æ ‡ | **æ˜¯** |
| `GET /admin/logs` | - | æ“ä½œæ—¥å¿— | **æ˜¯** |

## å¼€å‘è®¡åˆ’

### é˜¶æ®µä¸€ï¼šåç«¯è®¤è¯ï¼ˆP0ï¼‰

| åºå· | ä»»åŠ¡ | é¢„è®¡å·¥ä½œé‡ |
|------|------|----------|
| 1.1 | æ–°å¢ `AdminAuthInterceptor` + JWT å·¥å…·ç±» | ä¸­ |
| 1.2 | åœ¨ `AdminController` æ–°å¢ `login` æ¥å£ | å° |
| 1.3 | æ³¨å†Œ `WebMvcConfig` æ‹¦æˆªå™¨ | å° |
| 1.4 | `application.yml` æ–°å¢ admin é…ç½® | å° |

### é˜¶æ®µäºŒï¼šç”¨æˆ·å‰ç«¯ç²¾ç®€ + ä¸»é¢˜ï¼ˆP0+P1ï¼‰

| åºå· | ä»»åŠ¡ | é¢„è®¡å·¥ä½œé‡ |
|------|------|----------|
| 2.1 | `style.css` å¢åŠ  CSS å˜é‡ + æ·±è‰²ä¸»é¢˜ | ä¸­ |
| 2.2 | `app.js` å¢åŠ ä¸»é¢˜åˆ‡æ¢é€»è¾‘ | å° |
| 2.3 | `index.html` å¢åŠ ä¸»é¢˜åˆ‡æ¢æŒ‰é’® | å° |
| 2.4 | `app.js` ç§»é™¤ç®¡ç†åŠŸèƒ½ï¼ˆå›æ”¶ç«™ã€æ‰¹é‡åˆ é™¤ã€åˆ›å»ºæ ‡ç­¾/ç›¸å†Œï¼‰ | ä¸­ |
| 2.5 | `index.html` ç§»é™¤ç®¡ç† UI å…ƒç´  | å° |

### é˜¶æ®µä¸‰ï¼šç®¡ç†å‰ç«¯å»ºè®¾ï¼ˆP0+P1ï¼‰

| åºå· | ä»»åŠ¡ | é¢„è®¡å·¥ä½œé‡ |
|------|------|----------|
| 3.1 | åˆ›å»º `frontend/admin/index.html` ç®¡ç†åå°é¡µé¢æ¡†æ¶ | å¤§ |
| 3.2 | åˆ›å»º `frontend/admin/admin.css` ç®¡ç†åå°æ ·å¼ï¼ˆå«ä¸»é¢˜ï¼‰ | å¤§ |
| 3.3 | åˆ›å»º `frontend/admin/admin.js` ç®¡ç†åå°é€»è¾‘ | å¤§ |
| 3.4 | å®ç°ç™»å½•é¡µé¢å’Œ Token ç®¡ç† | ä¸­ |
| 3.5 | å®ç° Dashboard çœ‹æ¿ | ä¸­ |
| 3.6 | å®ç°å›¾ç‰‡ç®¡ç†é¡µ | ä¸­ |
| 3.7 | å®ç°å›æ”¶ç«™ç®¡ç† | ä¸­ |
| 3.8 | å®ç°æ ‡ç­¾/ç›¸å†Œç®¡ç† | ä¸­ |
| 3.9 | å®ç°æ“ä½œæ—¥å¿—/ç³»ç»Ÿç›‘æ§é¡µ | å° |

### é˜¶æ®µå››ï¼šNginx é…ç½® + æµ‹è¯•ï¼ˆP0ï¼‰

| åºå· | ä»»åŠ¡ | é¢„è®¡å·¥ä½œé‡ |
|------|------|----------|
| 4.1 | æ›´æ–° Nginx é…ç½®æ–°å¢ `/imgvault/admin/` è·¯ç”± | å° |
| 4.2 | é‡è½½ Nginx | å° |
| 4.3 | ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆç”¨æˆ·ç«¯ + ç®¡ç†ç«¯ï¼‰ | ä¸­ |

## éªŒæ”¶æ ‡å‡†

### ç”¨æˆ·å‰ç«¯ï¼ˆ/imgvault/ï¼‰

- [ ] èƒ½æ­£å¸¸ä¸Šä¼ å›¾ç‰‡
- [ ] èƒ½æµè§ˆæ‰€æœ‰å›¾ç‰‡ï¼ˆåˆ†é¡µï¼‰
- [ ] èƒ½æœç´¢å›¾ç‰‡
- [ ] èƒ½æŒ‰æ ‡ç­¾/ç›¸å†Œæµè§ˆï¼ˆåªè¯»ï¼Œæ— å¢åˆ æ“ä½œï¼‰
- [ ] **æ— **å›æ”¶ç«™å…¥å£
- [ ] **æ— **æ‰¹é‡åˆ é™¤æŒ‰é’®
- [ ] **æ— **æ ‡ç­¾/ç›¸å†Œåˆ›å»ºæŒ‰é’®
- [ ] å›¾ç‰‡è¯¦æƒ…**æ— **åˆ é™¤æŒ‰é’®
- [ ] æ”¯æŒæ·±è‰²/æµ…è‰²/è·Ÿéšç³»ç»Ÿä¸»é¢˜åˆ‡æ¢
- [ ] é€šè¿‡ `https://www.meczyc6.info/imgvault/` å¯æ­£å¸¸è®¿é—®

### ç®¡ç†å‰ç«¯ï¼ˆ/imgvault/admin/ï¼‰

- [ ] æœªç™»å½•æ—¶æ˜¾ç¤ºç™»å½•é¡µé¢
- [ ] å¯†ç éªŒè¯æ­£ç¡®åè¿›å…¥ç®¡ç†åå°
- [ ] Dashboard æ­£ç¡®æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
- [ ] å›¾ç‰‡ç®¡ç†æ”¯æŒå…¨çŠ¶æ€æµè§ˆ/æœç´¢/ç­›é€‰/æ‰¹é‡æ“ä½œ
- [ ] å›æ”¶ç«™åŠŸèƒ½å®Œæ•´ï¼ˆæŸ¥çœ‹/æ¢å¤/æ°¸ä¹…åˆ é™¤ï¼‰
- [ ] æ ‡ç­¾ CRUD æ­£å¸¸
- [ ] ç›¸å†Œ CRUD æ­£å¸¸
- [ ] æ“ä½œæ—¥å¿—å¯æŸ¥çœ‹
- [ ] ç³»ç»Ÿç›‘æ§å¯æŸ¥çœ‹
- [ ] æ”¯æŒæ·±è‰²/æµ…è‰²/è·Ÿéšç³»ç»Ÿä¸»é¢˜åˆ‡æ¢
- [ ] Token è¿‡æœŸåè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
- [ ] é€šè¿‡ `https://www.meczyc6.info/imgvault/admin/` å¯æ­£å¸¸è®¿é—®

### åç«¯è®¤è¯

- [ ] `POST /api/v1/admin/login` æ­£ç¡®éªŒè¯å¯†ç å¹¶è¿”å› Token
- [ ] `/api/v1/admin/**` æ¥å£ï¼ˆé™¤ loginï¼‰æœªæºå¸¦ Token è¿”å› 401
- [ ] æºå¸¦æœ‰æ•ˆ Token æ­£å¸¸è®¿é—® Admin æ¥å£
- [ ] Token è¿‡æœŸåè¿”å› 401
- [ ] ç”¨æˆ·ç«¯ APIï¼ˆ`/api/v1/images/*`, `/api/v1/tags/*`, `/api/v1/albums/*`ï¼‰ä¸å—å½±å“

### Nginx

- [ ] `/imgvault/` æ­£ç¡®æŒ‡å‘ç”¨æˆ·å‰ç«¯
- [ ] `/imgvault/admin/` æ­£ç¡®æŒ‡å‘ç®¡ç†å‰ç«¯
- [ ] `/imgvault/api/` æ­£ç¡®ä»£ç†åˆ°åç«¯ 8080 ç«¯å£
- [ ] å…¶ä»–å·²æœ‰è·¯ç”±ä¸å—å½±å“

---

**æœ€åæ›´æ–°**: 2026-02-15
